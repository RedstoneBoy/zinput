device out;

ljoy {
    let lmask = 2447088u64;
    let rmask = !lmask;
    out.buttons = out.buttons & !lmask | (ljoy.buttons & lmask);
}

rjoy {
    let lmask = 2447088u64;
    let rmask = !lmask;
    out.buttons = out.buttons & !rmask | (rjoy.buttons & rmask);
}